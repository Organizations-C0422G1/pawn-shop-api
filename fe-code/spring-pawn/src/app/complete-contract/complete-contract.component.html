<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body style="font-family: sans-serif">
<div class="col-md-7" style="margin: auto">
  <div class="mx-auto" style="width: 700px;">
    <div class="row mt-4">
      <div class="col-md-4">
        <span>Từ ngày: </span>
        <input type="date" id="startDate" [(ngModel)]="startReturnDate" name="startDate" class="form-control d-inline"
               style="width: 140px">
      </div>
      <div class="col-md-4">
        <span>Đến: </span>
        <input type="date" id="endDate" [(ngModel)]="endReturnDate" name="endDate" class="form-control d-inline"
               style="width: 140px">
      </div>

      <div class="col-md-4">
        <button class="p-btn ms-5" (click)="search()">Thống kê</button>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-md-6">
        <span>Tổng lợi nhuận: </span>
        <input type="number" id="allProfit" name="allProfit" value="{{totalProfit}}"
               class="form-control w-50 d-inline"  readonly> VNĐ
      </div>
      <div class="col-md-2">
        <button class="p-btn">
          Excel
          <i class="fa-solid fa-print"></i>
        </button>
      </div>
      <div class="col-md-4">
        <button class="p-btn ms-5" (click)="click()" data-bs-toggle="modal" data-bs-target="#modalChartJs">Xem biểu đồ
        </button>
      </div>

    </div>
  </div>

  <table class="table table-striped table-hover shadow mt-4" border="1">
    <thead class="text-white">
    <tr class="text-center">
      <th class="font-weight-bold">Stt</th>
      <th class="font-weight-bold">Mã hợp đồng</th>
      <th class="font-weight-bold">Tiền cho vay</th>
      <th class="font-weight-bold">Lãi suất</th>
      <th class="font-weight-bold">Lợi nhuận</th>
      <th class="font-weight-bold">Chi tiết hợp đồng</th>
    </tr>
    </thead>
    <tbody class="text-center">
    <tr *ngFor="let contract of completeContractList;index as i">
      <td>{{i + 1}}</td>
      <td>{{contract.code}}</td>
      <td>{{contract.itemPrice}}</td>
      <td>{{contract.interestRate}}</td>
      <td>{{contract.profit}}</td>
      <td>
        <button type="button" class="p-btn" data-bs-toggle="modal" (click)="detailContract(contract.id)"
                data-bs-target="#Modal">
          <i class="fa-solid fa-circle-info"></i>
        </button>
      </td>
    </tr>
    </tbody>
  </table>

  <nav>
    <ul class="pagination">
      <li class="page-item">
        <button class="page-link" (click)="getPage(page - 1)">Previous</button>
      </li>
      <li class="page-item">
        <button class="page-link" (click)="getPage(page + 1)" [disabled]="page+1 == totalPage">Next</button>
      </li>
    </ul>
  </nav>


  <!-- Modal Detail Contract-->
  <div class="modal fade" id="Modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header p-bg">
          <h5 class="modal-title" id="exampleModalLabel">Thông tin hợp đồng</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" *ngIf="contract != null">

          <div class="col-md-12">
            <p>Tên khách hàng: {{contract.customer.name}}</p>
          </div>

          <div class="col-md-12">
            <p>Chứng minh nhân dân: {{contract.customer.idCard}}</p>
          </div>

          <div class="col-md-12">
            <p>Đồ cầm: {{contract.pawnItem.name}}</p>
          </div>

          <div class="col-md-12">
            <p>Tiền cho vay: {{contract.itemPrice}} VNĐ</p>
          </div>

          <div class="col-md-12">
            <p>Lãi suất: {{contract.interestRate}} %/ngày</p>
          </div>

          <div class="col-md-12">
            <p>Ngày bắt đầu: {{contract.startDate}}</p>
          </div>

          <div class="col-md-12">
            <p>Ngày kết thúc: {{contract.endDate}}</p>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal Chart-->
  <div class="modal fade" id="modalChartJs" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalChart">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="chart-container" style="position: relative; height:20vh; width:60vw">
            <canvas id="myChart"></canvas>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>

</body>
<script src="https://kit.fontawesome.com/8a4e8d8d08.js" crossorigin="anonymous"></script>
</html>


<!--<div class="col-4">-->
<!--  <input type="date" [(ngModel)]="startReturnDate" name="startDate">-->
<!--  <input type="date" [(ngModel)]="endReturnDate" name="endDate">-->
<!--  <button (click)="search()">Tìm</button>-->
<!--</div>-->

<!--<table class="table">-->
<!--  <thead>-->
<!--  <tr>-->
<!--    <th>Stt</th>-->
<!--    <th>Mã hợp đồng</th>-->
<!--    <th>Tiền cho vay</th>-->
<!--    <th>Lãi suất</th>-->
<!--    <th>Lợi nhuận</th>-->
<!--  </tr>-->
<!--  </thead>-->
<!--  <tbody>-->
<!--  <tr *ngFor="let contract of completeContractList;index as i">-->
<!--    <td>{{i + 1}}</td>-->
<!--    <td>{{contract.code}}</td>-->
<!--    <td>{{contract.itemPrice}}</td>-->
<!--    <td>{{contract.interestRate}}</td>-->
<!--    <td>{{contract.profit}}</td>-->
<!--  </tr>-->
<!--  </tbody>-->
<!--</table>-->

<!--<nav>-->
<!--  <ul class="pagination">-->
<!--    <li class="page-item">-->
<!--      <button class="page-link" (click)="getPage(page - 1)">Previous</button>-->
<!--    </li>-->
<!--    <li class="page-item">-->
<!--      <a class="page-link" (click)="getPage(page + 1)">Next</a>-->
<!--    </li>-->
<!--  </ul>-->
<!--</nav>-->

<!--<button (click)="click()">Biểu đồ lợi nhuận</button>-->
<!--<div class="chart-container" style="position: relative; height:20vh; width:60vw">-->
<!--  <canvas id="myChart"></canvas>-->
<!--</div>-->
